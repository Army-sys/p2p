$(function(){var s=$("#username"),l=$("#pwd"),i=$("#email"),n=$("#nickname"),o=!1,v=!1,c=!1,d=!1;s.blur(function(){var r=$(this).val(),t=$(this).next();/^[a-zA-Z0-9_-]{4,16}$/.test(r)?$.ajax({url:"http://127.0.0.1:8848/accrepeat.php",type:"GET",data:"username="+r,success:function(a){var e;o="ok"===a?(t.text("").removeClass("error"),s.removeClass("active"),!0):(e=Math.floor(8999*Math.random())+1e3,t.html("<strong>用户名太受欢迎<br/>建议:&nbsp;"+r+e+"</strong>").addClass("error"),s.addClass("active"),!1)}}):(t.text("用户名格式不合法").addClass("error"),s.addClass("active"),o=!1)}),l.blur(function(){var a=$(this).val(),e=$(this).next();v=/^\w{4,12}$/.test(a)?(e.text("").removeClass("error"),l.removeClass("active"),!0):(e.text("请输入2-12位数字").addClass("error"),l.addClass("active"),!1)}),i.blur(function(){var a=$(this).val(),e=$(this).next();c=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(a)?(e.text("").removeClass("error"),i.removeClass("active"),!0):(e.text("请输入正确邮箱").addClass("error"),i.addClass("active"),!1)}),n.blur(function(){var a=$(this).val(),e=$(this).next();d=""!=a?(e.text("").removeClass("error"),n.removeClass("active"),!0):(e.text("昵称不能为空").addClass("error"),n.addClass("active"),!1)}),$("#butn").click(function(){if(!(o&&v&&c&&d))return s.trigger("blur"),l.trigger("blur"),i.trigger("blur"),n.trigger("blur"),!1;var a=s.val(),e=l.val(),r=i.val(),t=n.val();$.ajax({url:"http://127.0.0.1:8848/reg.php",type:"POST",data:{username:a,pwd:e,email:r,nickname:t},success:function(a){"ok"==a?(alert("恭喜你,注册成功!"),location.href="./sign.html"):alert("注册失败，请稍后再试~~~")}})})});